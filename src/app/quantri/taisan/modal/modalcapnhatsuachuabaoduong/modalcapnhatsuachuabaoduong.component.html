<div class="modal-header">
    <h5 class="modal-title">
        {{title}}</h5>
    <button *ngIf="false" type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
    </button>
    <!-- <span class="p-button-sm p-button-sm p-button-text close" aria-hidden="true"
    (click)="activeModal.dismiss('Cross click')">×</span> -->
</div>
<div class="modal-body">
    <div class="p-d-flex p-flex-row p-jc-between">
        <div class="modal-bt p-mb-4 ">
            <button pButton pRipple type="button" label="Quay lại" class="p-mr-2 p-button-sm"
                (click)="activeModal.dismiss('close')"></button>
            <button pButton pRipple type="button" label="Ghi lại" class="p-mr-2 p-button-sm " (click)="GhiLai()"
                *ngIf="checkbutton.Ghi"></button>
            <button pButton pRipple type="button" label="Xóa" class="p-mr-2 p-button-sm" *ngIf="checkbutton.Xoa"
                (click)="XoaQuyTrinh()"></button>
            <button pButton pRipple type="button" label="Không duyệt" class="p-mr-2 p-button-sm" (click)="KhongDuyet()"
                *ngIf="checkbutton.KhongDuyet"></button>
            <button pButton pRipple type="button" label="Chuyển duyệt" class="p-mr-2 p-button-sm"
                (click)="ChuyenDuyet()" *ngIf="checkbutton.ChuyenTiep"></button>
            <!-- <button pButton pRipple type="button" label="Kết xuất" *ngIf="canExport" (click)="exportExcel()"
                class="p-mr-2 p-button-sm"></button> -->
        </div>
    </div>
    <div class="p-grid">
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Nhà máy<span class="required">*</span>:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <p-dropdown [filter]="true" [options]="listDonVi" placeholder="Chọn nhà máy" styleClass="p-inputtext-sm"
                    [(ngModel)]="item.IdDuAn" (onChange)="GetNhaMay()"></p-dropdown>
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Phân xưởng<span class="required">*</span>:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <p-dropdown [filter]="true" [options]="listdmPhanXuong" placeholder="Chọn phân xưởng"
                    styleClass="p-inputtext-sm" [(ngModel)]="item.IddmPhanXuong" (onChange)="GetListTaiSanDaBanGiao()">
                </p-dropdown>
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Tài sản<span class="required">*</span>:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <p-dropdown [filter]="true" [options]="listTaiSanDaBanGiao" placeholder="Chọn tài sản"
                    styleClass="p-inputtext-sm" [(ngModel)]="item.IdTaiSan" (onChange)="SelectTaiSan()"></p-dropdown>
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-lg-3 p-p-0 my-auto">Tài liệu đính kèm:</label>
            <div class="p-col-12 p-lg-9 p-p-0">
                <div class="p-inputgroup">
                    <input type="text" pInputText class="p-inputtext-sm" [ngModel]="NameFile" disabled>
                    <button type="button" pButton pRipple icon="pi pi-upload"
                        class="p-button-sm p-button-text p-button-secondary" (click)="taiLenFileDinhKem()"></button>
                    <!-- <button type="button" pButton pRipple icon="pi pi-download" class="p-button-sm p-button-text p-button-secondary"
                        (click)="taiXuongFileDinhKem()"></button> -->
                </div>
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Mã:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.TaiSan.Ma" pInputText [disabled]="true" />
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Tên:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.TaiSan.Ten" pInputText [disabled]="true" />
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Số seri:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.TaiSan.SoSeri" pInputText
                    [disabled]="true" />
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Ngày nhập:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <p-calendar inputStyleClass="p-inputtext-sm" [locale]="lang" dateFormat="dd/mm/yy"
                    [yearNavigator]="true"  [(ngModel)]="item.TaiSan.NgayNhap"
                    placeholder="dd/mm/yyyy" [disabled]="true">
                </p-calendar>
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Loại tài sản:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.TaiSan.TendmLoaiTaiSan" pInputText
                    [disabled]="true" />
            </div>
        </div>
        <div class="p-col-12 p-lg-3 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-3 p-p-0 my-auto">Đơn vị tính:</label>
            <div class="p-col-12 p-xl-9 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.TaiSan.TendmDoViTinh" pInputText
                    [disabled]="true" />
            </div>
        </div>
        <div class="p-col-12 p-lg-12 p-mb-3 p-p-3 d-flex flex-column flex-xl-row">
            <label class="p-col-12 p-xl-1 p-p-0 my-auto widthghichu">Nội dung:</label>
            <div class="p-col-12 p-xl-11 p-p-0">
                <input type="text" class="p-inputtext-sm" [(ngModel)]="item.NoiDung" pInputText />
            </div>
        </div>
    </div>
    <p-panel header="Tài sản" [toggleable]="true">
        <p-treeTable [value]="listTaiSan_copy" styleClass="p-treetable p-treetable-caption">
            <ng-template pTemplate="colgroup">
                <colgroup>
                    <col>
                    <col>
                    <col>
                    <col>
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th class="text-center">Mã</th>
                    <th class="text-center">Tên</th>
                    <th class="text-center">Nguyên giá</th>
                    <th class="text-center">Ngày nhập</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
                <tr>
                    <td>
                        <p-treeTableToggler [rowNode]="rowNode"></p-treeTableToggler>
                        {{rowData.Ma}}
                    </td>
                    <td>{{rowData.Ten}}</td>
                    <td class="text-center">{{rowData.NguyenGia|number:'0.0'}}</td>
                    <td class="text-center">{{rowData.NgayNhap|date:'dd/MM/yyyy'}}</td>
                </tr>
            </ng-template>
        </p-treeTable>
        <p-table [value]="item.TaiSan.listTaiSan|isXoa" *ngIf="false"
            styleClass="p-datatable-customers p-datatable-gridlines p-datatable-sm" [scrollable]="true">
            <ng-template pTemplate="colgroup">
                <colgroup>
                    <col style="width: 50px;">
                    <col>
                    <col>
                    <col>
                    <col>
                    <col>
                </colgroup>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th class="text-center">
                        STT
                    </th>
                    <th class="text-center">Mã</th>
                    <th class="text-center">Tên</th>
                    <th class="text-center">Ghi chú</th>
                    <th class="text-center">Nguyên giá</th>
                    <th class="text-center">Ngày nhập</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item let-i="rowIndex">
                <tr>
                    <td class="text-center">
                        {{i + 1}}
                    </td>
                    <td class="text-center">{{item.Ma}}</td>
                    <td class="text-center">{{item.Ten}}</td>
                    <td class="text-center">{{item.GhiChu}}</td>
                    <td class="text-center">{{item.NguyenGia|number:'0.0'}}</td>
                    <td class="text-center">{{item.NgayNhap|date:'dd/MM/yyyy'}}</td>
                </tr>
            </ng-template>
        </p-table>
    </p-panel>
</div>